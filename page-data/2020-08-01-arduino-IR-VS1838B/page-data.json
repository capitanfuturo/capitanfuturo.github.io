{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-08-01-arduino-IR-VS1838B/","result":{"data":{"site":{"siteMetadata":{"title":"Capitanfuturo"}},"markdownRemark":{"id":"a7cc7d37-b5a8-5d66-84c0-fd756100d17d","excerpt":"ðŸ’» Premessa Un altro componente da tenere nella propria cassetta degli attrezzi di Arduino puÃ² essere un ricevitore a infrarossi (IR). Lo usiamo comunemente neiâ€¦","html":"<h2>ðŸ’» Premessa</h2>\n<p>Un altro componente da tenere nella propria cassetta degli attrezzi di Arduino puÃ² essere un ricevitore a infrarossi (IR). Lo usiamo comunemente nei telecomandi dei televisori e puÃ² essere utile per pilotare con semplici comandi prestabiliti la logica di un Arduino.</p>\n<h2>Pinout del componente VS1838B</h2>\n<p>Visto frontalmente il componente presenta 3 PIN con il seguente schema:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/70b52ef42321044140629fc30dbf7a69/b4294/ir-pinout.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.88607594936708%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBP/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAAB6AbBQSWX/8QAFxABAQEBAAAAAAAAAAAAAAAAAQACEP/aAAgBAQABBQK02RBe/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAAREgIf/aAAgBAQAGPwIhG0//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMVFhkf/aAAgBAQABPyF3VxurApmzYgQrmY179n//2gAMAwEAAgADAAAAEFTf/8QAFxEBAAMAAAAAAAAAAAAAAAAAARARIf/aAAgBAwEBPxBMuP/EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAgEBPxDVf//EAB0QAAIDAAIDAAAAAAAAAAAAAAERACExQZFRcYH/2gAIAQEAAT8QIFAN5UFBAExNPl0/TzEtDFMX3KySRS79ZLc7J//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ir-pinout.jpg\"\n        title=\"\"\n        src=\"/static/70b52ef42321044140629fc30dbf7a69/b4294/ir-pinout.jpg\"\n        srcset=\"/static/70b52ef42321044140629fc30dbf7a69/ff44c/ir-pinout.jpg 158w,\n/static/70b52ef42321044140629fc30dbf7a69/a6688/ir-pinout.jpg 315w,\n/static/70b52ef42321044140629fc30dbf7a69/b4294/ir-pinout.jpg 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>Segnale</li>\n<li>Terra. GND</li>\n<li>Alimentazione. VDD</li>\n</ul>\n<h2>Installazione della libreria Arduino-IRremote</h2>\n<p>Per aiutarci sulla gestione del ricevitore IR possiamo avvalerci di una libreria di terze parti: Arduino-IRremote che si trova in github a questo indirizzo: <a href=\"http://z3t0.github.io/Arduino-IRremote/\">http://z3t0.github.io/Arduino-IRremote/</a>.\nPer installare la libreria bisogna eseguire il download della libreria e andarlo ad importare nellâ€™Arduino IDE dal menu principale selezionando:</p>\n<ol>\n<li>Sketch</li>\n<li>Include Library</li>\n<li>Add .ZIP Library</li>\n</ol>\n<p>Una volta fatto possiamo usare uno sketch come quello sottostante dopo aver connesso il PIN del segnale del ricevitore IR al PIN 7 di Arduino. Nellâ€™esmpio potremo vedere nella console seriale i segnali inviati da un telecomando come quello della foto qui sotto:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 253px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e0e74dbfc817f5c0c66075470179241b/7e1ca/telecomando.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 174.0506329113924%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAjABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAL/xAAXAQEBAQEAAAAAAAAAAAAAAAADAAIB/9oADAMBAAIQAxAAAAGmLOMapBpuo2VqWIGkcFBd/8QAHhABAAEEAgMAAAAAAAAAAAAAAQIAAxAREiIjMTL/2gAIAQEAAQUCDdawHT1gPHMdS+4EJxlbg1cRuINcY4//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwFaX//EABcRAQEBAQAAAAAAAAAAAAAAAAEQABH/2gAIAQIBAT8BA5DN/8QAIxAAAQIFAwUAAAAAAAAAAAAAAQACEBEhMVESIjJBYXFygv/aAAgBAQAGPwKsR7YX1iDKE7+idtPLKd5TZukWmycNd+6OmoVQrCH/xAAcEAACAwADAQAAAAAAAAAAAAABEQAhMUFRgfH/2gAIAQEAAT8hWJbQKMIcPVogNSyuxxoWTup5XUKfWC6gXGyFAjd8ywDjaAO8RwUIPyYoZ8qGsn//2gAMAwEAAgADAAAAEDw684vv/8QAGREBAQEAAwAAAAAAAAAAAAAAAQARECEx/9oACAEDAQE/EFHIn1l0WHH/xAAZEQADAAMAAAAAAAAAAAAAAAAAAREQITH/2gAIAQIBAT8QiMZwhNleP//EACEQAQACAgICAgMAAAAAAAAAAAEAESExQVFhcYGhkcHw/9oACAEBAAE/EAUAqgG/cOUrqNpkgob3EKzAXT0b6/uobArS2PEpthkn4alLKVlaenrvge5Q5VoD+sb8+dzgil95/cp5e5kCb1oyeSFhRt07wHy5i6eAGxQDnmMOJMWRK63QBUADgJ//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"telecomando.jpg\"\n        title=\"\"\n        src=\"/static/e0e74dbfc817f5c0c66075470179241b/7e1ca/telecomando.jpg\"\n        srcset=\"/static/e0e74dbfc817f5c0c66075470179241b/ff44c/telecomando.jpg 158w,\n/static/e0e74dbfc817f5c0c66075470179241b/7e1ca/telecomando.jpg 253w\"\n        sizes=\"(max-width: 253px) 100vw, 253px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;IRremote.h></span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;IRremoteInt.h></span></span>\n\n<span class=\"token keyword\">const</span> <span class=\"token keyword\">unsigned</span> <span class=\"token keyword\">int</span> RECV_PIN <span class=\"token operator\">=</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// PIN segnale -> Arduino</span>\nIRrecv <span class=\"token function\">irrecv</span><span class=\"token punctuation\">(</span>RECV_PIN<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndecode_results results<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">setup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  Serial<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token number\">9600</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//inizializzo la seriale</span>\n  irrecv<span class=\"token punctuation\">.</span><span class=\"token function\">enableIRIn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//abilito il ricevitore</span>\n  irrecv<span class=\"token punctuation\">.</span><span class=\"token function\">blink13</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//configuro il LED al PIN 13 di Arduino ad illuminarsi all'arrivo di un segnale</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>irrecv<span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>results<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>results<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">,</span> HEX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// stampo il codice arrivato dal telecomando in formato esadecimale</span>\n        irrecv<span class=\"token punctuation\">.</span><span class=\"token function\">resume</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// mi preparo a ricevere un nuovo segnale</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Di seguito una foto del cablaggio:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b89cd7527808228465c45e21a5cf074/b4294/schema.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.63291139240506%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAQFAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAADAv/aAAwDAQACEAMQAAABio8dA7znKE3IhgjAv//EAB0QAAIBBAMAAAAAAAAAAAAAAAECAwAEEzIREjH/2gAIAQEAAQUC9rCSqjgRpkl0RNTbRGriPolf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAQ/9oACAEDAQE/AVjf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPwHB3//EAB0QAAICAQUAAAAAAAAAAAAAAAARAQJRECEyYXH/2gAIAQEABj8CwzawsFsQS5ZBxXhKvZd6f//EABwQAQACAwADAAAAAAAAAAAAAAEAESExQWFxgf/aAAgBAQABPyFTRdFxBDb6lXMo2qYLOFfZSmgF+pvLlzEenkkpyUaVwKAJ/9oADAMBAAIAAwAAABDs737/xAAXEQEBAQEAAAAAAAAAAAAAAAABABAx/9oACAEDAQE/EFVuCc//xAAXEQEBAQEAAAAAAAAAAAAAAAABABAx/9oACAECAQE/EAgXTGf/xAAfEAEBAQEAAgEFAAAAAAAAAAABESEAQVGhMWFxseH/2gAIAQEAAT8QIqEAR1z345OGCMWv3nbMUbXR3ejqHkZX5+OUwe2zB/OqQap+63lz9dbu+8eufASiflL88ACAd//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"schema.jpg\"\n        title=\"\"\n        src=\"/static/6b89cd7527808228465c45e21a5cf074/b4294/schema.jpg\"\n        srcset=\"/static/6b89cd7527808228465c45e21a5cf074/ff44c/schema.jpg 158w,\n/static/6b89cd7527808228465c45e21a5cf074/a6688/schema.jpg 315w,\n/static/6b89cd7527808228465c45e21a5cf074/b4294/schema.jpg 600w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>Mappatura dei tasti del telecomando (codici HEX)</h2>\n<p>Dallo sketch precedente possiamo iniziare a mappare tutti i tasti del nostro telecomando per poterli poi usare nei nostri porssimi progetti. Da notare che nel mio caso câ€™Ã¨ un segnale che arriva sempre e che viene usato come terminatore 0xFFFFFFFF</p>\n<p>Esempio:</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">FFA25D\nFFFFFFFF</code></pre></div>\n<p>Qui di seguito porto la mappatura del telecomando che avevo in dotazione.</p>\n<table>\n<thead>\n<tr>\n<th>PULSANTE</th>\n<th>CODICE</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>CH-</td>\n<td>FFA25D</td>\n</tr>\n<tr>\n<td>CH</td>\n<td>FF629D</td>\n</tr>\n<tr>\n<td>CH+</td>\n<td>FFE21D</td>\n</tr>\n<tr>\n<td>&#x3C;&#x3C;</td>\n<td>FF22DD</td>\n</tr>\n<tr>\n<td>>></td>\n<td>FF02FD</td>\n</tr>\n<tr>\n<td>>ll</td>\n<td>FFC23D</td>\n</tr>\n<tr>\n<td>-</td>\n<td>FFE01F</td>\n</tr>\n<tr>\n<td>+</td>\n<td>FFA857</td>\n</tr>\n<tr>\n<td>EQ</td>\n<td>FF906F</td>\n</tr>\n<tr>\n<td>0</td>\n<td>FF6897</td>\n</tr>\n<tr>\n<td>100+</td>\n<td>FF9867</td>\n</tr>\n<tr>\n<td>200+</td>\n<td>FFB04F</td>\n</tr>\n<tr>\n<td>1</td>\n<td>FF30CF</td>\n</tr>\n<tr>\n<td>2</td>\n<td>FF18E7</td>\n</tr>\n<tr>\n<td>3</td>\n<td>FF7A85</td>\n</tr>\n<tr>\n<td>4</td>\n<td>FF10EF</td>\n</tr>\n<tr>\n<td>5</td>\n<td>FF38C7</td>\n</tr>\n<tr>\n<td>6</td>\n<td>FF5AA5</td>\n</tr>\n<tr>\n<td>7</td>\n<td>FF42BD</td>\n</tr>\n<tr>\n<td>8</td>\n<td>FF4AB5</td>\n</tr>\n<tr>\n<td>9</td>\n<td>FF52AD</td>\n</tr>\n</tbody>\n</table>\n<h2>Leggere lâ€™output Arduino dalla seriale con Linux</h2>\n<p>Un comando che ho trovato utile per leggere i segnali ricevuti dal telecomando direttamente dal terminale di Linux Ã¨ il tail sul device al quale Ã¨ montato Arduino. Nel mio caso /dev/ttyACM1:</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">tail <span class=\"token operator\">-</span>f <span class=\"token operator\">/</span>dev<span class=\"token operator\">/</span>ttyACM1</code></pre></div>\n<h2>Conclusione</h2>\n<p>Tempo fa mi si Ã¨ rotta una striscia LED che usavo per illuminare il retro della telivisione in camera. Il telecomnado infatti Ã¨ un residuo di quel prodotto che a un certo punto ha smesso di funzionare. Dopo i porgetti sui LED ho pensato che sfruttando Arduino e la striscia che acora ho nel cassetto avrei potuto dargli nuova vita.\nEcco che questo progetto mi ha permesso di fare esperienza del mattoncino mancante per mettere insieme le due cose. Probabilmente scriverÃ² qualcosa a riguardo nei prossimi post.</p>\n<h2>Link Utili</h2>\n<p><a href=\"https://www.youtube.com/watch?v=zLR8EevE5_A\">https://www.youtube.com/watch?v=zLR8EevE5_A</a>\n<a href=\"http://z3t0.github.io/Arduino-IRremote/\">http://z3t0.github.io/Arduino-IRremote/</a></p>\n<blockquote>\n<p>Acqua e luce creano lâ€™arco dei sette colori. (Silvia Zoncheddu)</p>\n</blockquote>","frontmatter":{"title":"Arduino e il ricevitore IR VS1838B","date":"01 August 2020","description":null,"tags":["Arduino"]}},"previous":{"fields":{"slug":"/2020-07-15-arduino-buzzer/"},"frontmatter":{"title":"Coffin meme: Arduino e i buzzer. Scrivere una libreria"}},"next":{"fields":{"slug":"/2020-08-15-striscia-led/"},"frontmatter":{"title":"Pilotare una striscia LED con Arduino"}}},"pageContext":{"id":"a7cc7d37-b5a8-5d66-84c0-fd756100d17d","previousPostId":"78f33d22-c89f-5d9d-89bd-726632a549d6","nextPostId":"27630782-fe56-5ee1-be0d-404b30d83107"}},"staticQueryHashes":["2114561082"],"slicesMap":{}}