{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021-09-01-raspi3-docker/","result":{"data":{"site":{"siteMetadata":{"title":"Capitanfuturo"}},"markdownRemark":{"id":"5f222852-0fb7-517e-afdd-7cfc097e4f66","excerpt":"ðŸ’¾ Introduzione Uno degli obiettivi che mi sono posto quesâ€™anno Ã¨ quello di migliorare e perfezionare le mie competenze sullo stack docker, node e angular. Inâ€¦","html":"<h2>ðŸ’¾ Introduzione</h2>\n<p>Uno degli obiettivi che mi sono posto quesâ€™anno Ã¨ quello di migliorare e perfezionare le mie competenze sullo stack docker, node e angular. In particolare a lavoro ho avuto la possibilitÃ  di sperimentare ed imparare molto su questi oggetti per cui ho voluto utilizzare un vecchio Raspberry PI 3 come nodo nel mio homelab per far girare un docker daemon e alcuni docker-compose.</p>\n<h2>Installazione di Ubuntu 20.04 Server per Raspberry PI</h2>\n<p>Raspberry Pi ha il chip principale, la CPU basata su architettura ARM64 e non sulla classica x86 64 bit. Per installare Ubuntu su Raspberry ho scelto la versione da installare su una microsd dal sito ufficiale di Canonical <a href=\"https://cdimage.ubuntu.com/releases/\">https://cdimage.ubuntu.com/releases/</a> e selezionando in particolare la <em>64-bit ARM (ARMv8/AArch64) server install image</em>.</p>\n<p>Una volta scaricata la ISO attraverso <a href=\"https://www.balena.io/etcher/\">https://www.balena.io/etcher/</a> Ã¨ facilmente possibile copiare la ISO sulla microSD card.</p>\n<h2>Abilitare un server SSH</h2>\n<p>Una volta eseguito il flash dellâ€™immagine ISO sulla microSD. Dobbiamo prevedere come accedere al nostro Raspi senza interfaccia grafica attraverso una connessione SSH. Fortunatamente Ubuntu Server prevede giÃ  un server SSH installato e per abilitarlo al boot basta aggiungere un file chiamatoÂ <code class=\"language-text\">ssh</code>Â nella partizione <strong>system-boot</strong>.\nSi puÃ² aggiungere il file direttamente dopo il flash dal proprio computer. La directory Ã¨ la stessa dove si trova il file <strong>config.txt</strong></p>\n<p>Questo ci permette di avere un Ubuntu server completamente headless giÃ  dal primo avvio e di modificare la password. Se alla connessione viene richiesto username e password questi sono i dati:</p>\n<p>username: <em>ubuntu</em>\npassword: <em>ubuntu</em></p>\n<h3>(Opzionale) disaibilitare il wifi</h3>\n<p>Se serve disabilitare il modulo wifi sempre nella partizione <strong>system-boot</strong> si puÃ² modificare il file <code class=\"language-text\">network-config</code> commentando la parte del wifi:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">version: <span class=\"token number\">2</span>\nethernets:\n  eth0:\n    dhcp4: <span class=\"token boolean\">true</span>\n    optional: <span class=\"token boolean\">true</span>\n<span class=\"token comment\">#wifis:</span>\n<span class=\"token comment\">#  wlan0:</span>\n<span class=\"token comment\">#    dhcp4: true</span>\n<span class=\"token comment\">#    optional: true</span>\n<span class=\"token comment\">#    access-points:</span>\n<span class=\"token comment\">#      myhomewifi:</span>\n<span class=\"token comment\">#        password: \"S3kr1t\"</span>\n<span class=\"token comment\">#      myworkwifi:</span>\n<span class=\"token comment\">#        password: \"correct battery horse staple\"</span>\n<span class=\"token comment\">#      workssid:</span>\n<span class=\"token comment\">#        auth:</span>\n<span class=\"token comment\">#          key-management: eap</span>\n<span class=\"token comment\">#          method: peap</span>\n<span class=\"token comment\">#          identity: \"me@example.com\"</span>\n<span class=\"token comment\">#          password: \"passw0rd\"</span>\n<span class=\"token comment\">#          ca-certificate: /etc/my_ca.pem</span></code></pre></div>\n<h2>Installazione di Docker</h2>\n<p>Ora Ã¨ il tempo di installare docker</p>\n<ol>\n<li>eseguire lo script ufficiale: <code class=\"language-text\">curl -sSL https://get.docker.com | sh</code></li>\n<li>aggiungere lâ€™utente corrente al gruppo di docker. Questo ci permette di eseguire docker senza essere root. <code class=\"language-text\">sudo usermod -aG docker ubuntu</code></li>\n<li>riavviare il raspi</li>\n<li>una volta rientrati via ssh sul raspi provare che tutto funzioni con il comando <code class=\"language-text\">docker run hello-world</code></li>\n</ol>\n<h2>Installazione di docker-compose</h2>\n<p>Per il mio home lab utilizzerÃ² docker-compose in modo da descrivere in maniera piÃ¹ semplice gli stack applicativi che serviranno nellâ€™infrastruttura.</p>\n<p>Lâ€™installazione consta dei seguenti passi:</p>\n<ol>\n<li><code class=\"language-text\">sudo apt-get install -y libffi-dev libssl-dev python3 python3-pip</code></li>\n<li><code class=\"language-text\">sudo apt-get remove python-configparser</code></li>\n<li><code class=\"language-text\">sudo pip3 -v install docker-compose</code></li>\n</ol>\n<h2>Conclusione</h2>\n<p>Nei prossimi articoli annoterÃ² alcune cose sullâ€™architettura, la CI/CD e altre prove per il mio side project formativo.</p>\n<h2>Link</h2>\n<ul>\n<li>Guida ufficiale. <a href=\"https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi\">https://ubuntu.com/tutorials/how-to-install-ubuntu-on-your-raspberry-pi</a></li>\n<li>Articolo di Rohan Sawant <a href=\"https://dev.to/rohansawant/installing-docker-and-docker-compose-on-the-raspberry-pi-in-5-simple-steps-3mgl\">https://dev.to/rohansawant/installing-docker-and-docker-compose-on-the-raspberry-pi-in-5-simple-steps-3mgl</a></li>\n</ul>\n<blockquote>\n<p>Lâ€™architettura Ã¨ un sogno, la geometria il suo racconto, il manufatto la realizzazione del sogno, lâ€™architetto colui che racconta i sogni. (Carlo Farroni)</p>\n</blockquote>","frontmatter":{"title":"Raspberry PI 3 come docker - docker-compose node su Ubuntu Server","date":"01 September 2021","description":null,"tags":["Software"]}},"previous":{"fields":{"slug":"/2021-08-01-wsl2-gui/"},"frontmatter":{"title":"WSL2 + GUI: Installare XFCE4 in WSL2 (Ubuntu 20.04)"}},"next":{"fields":{"slug":"/2021-09-15-netflix/"},"frontmatter":{"title":"L'unica regola Ã¨ che non ci sono regole: Netflix e la cultura della reinvenzione (Hastings, Meyer, Caraffini)"}}},"pageContext":{"id":"5f222852-0fb7-517e-afdd-7cfc097e4f66","previousPostId":"77ef47a0-8607-55c7-b930-b5d2bf0e3161","nextPostId":"bc7edbee-61ff-5b77-9b9e-1a4ae8de08a8"}},"staticQueryHashes":["2114561082"],"slicesMap":{}}