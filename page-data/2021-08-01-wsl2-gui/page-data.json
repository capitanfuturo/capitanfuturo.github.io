{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021-08-01-wsl2-gui/","result":{"data":{"site":{"siteMetadata":{"title":"Capitanfuturo"}},"markdownRemark":{"id":"77ef47a0-8607-55c7-b930-b5d2bf0e3161","excerpt":"üíæ Premessa Sto facendo pratica con Kubernates su AWS (EKS) per un nuovo cliente. E‚Äô interessante sporcarsi le mani su un prodotto solo studiato e visto come‚Ä¶","html":"<h2>üíæ Premessa</h2>\n<p>Sto facendo pratica con Kubernates su AWS (EKS) per un nuovo cliente. E‚Äô interessante sporcarsi le mani su un prodotto solo studiato e visto come architetto software. Mi rendo conto che molti ‚Äúarchitetti‚Äù, me compreso, spesso hanno disegnato sistemi complessi senza realmente padroneggiare la tecnologia ma seguendo white paper e casi d‚Äôuso dei provider di soluzioni cloud. Sporcarsi le mani e andare pi√π sull‚Äôoperation ti permette di comprendere pi√π a fondo l‚Äôessenza dell‚Äôoggetto che si ha di fronte e di conseguenza di calarlo nelle soluzioni pi√π adatte.</p>\n<p>Nel mio caso particolare non riuscivo a fare un port forwarding di una dashboard di kubernates <a href=\"https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html\">https://docs.aws.amazon.com/eks/latest/userguide/dashboard-tutorial.html</a> attraverso WSL2 su Windows 10. Per risolvere la cosa ho seguito la strada di connettere Windows 10 attraverso un server RDP servito da WSL2. Qui mi sono scritto i passaggi per non perdermeli.</p>\n<h2>Pulizia preliminare</h2>\n<p>Prima di iniziare dobbiamo assicuraci di pulire questo pacchetto. Dal terminale di Ubuntu WSL2 eseguire</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> purge xrdp</code></pre></div>\n<h2>Installazione dei pacchetti</h2>\n<p>Ora si installa il server per la connessione RDP da Windows al Window Manager di WSL2, il windows manager XFCE4 (ho scelto questo per la sua leggerezza) ed un browser. Sempre da terminale di WSL 2 eseguire il seguente comando.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> xrdp xfce4 xfce4-goodies firefox</code></pre></div>\n<h2>Configurazione</h2>\n<p>Passiamo alla configurazione del server RDP. Faremo un backup della precedente configurazione in caso qualcosa vada storto e anciamo ad abilitare la porta 3390 per la connessione da Windows 10.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">cp</span> /etc/xrdp/xrdp.ini /etc/xrdp/xrdp.ini.bak\n<span class=\"token function\">sudo</span> <span class=\"token function\">sed</span> <span class=\"token parameter variable\">-i</span> <span class=\"token string\">'s/3389/3390/g'</span> /etc/xrdp/xrdp.ini\n<span class=\"token function\">sudo</span> <span class=\"token function\">sed</span> <span class=\"token parameter variable\">-i</span> <span class=\"token string\">'s/max_bpp=32/#max_bpp=32\\nmax_bpp=128/g'</span> /etc/xrdp/xrdp.ini\n<span class=\"token function\">sudo</span> <span class=\"token function\">sed</span> <span class=\"token parameter variable\">-i</span> <span class=\"token string\">'s/xserverbpp=24/#xserverbpp=24\\nxserverbpp=128/g'</span> /etc/xrdp/xrdp.ini\n<span class=\"token builtin class-name\">echo</span> xfce4-session <span class=\"token operator\">></span> ~/.xsession</code></pre></div>\n<p>Ora correggiamo il windows manager da usare di default con il server RDP:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">nano</span> /etc/xrdp/startwm.sh</code></pre></div>\n<p>Commentare queste ultime righe:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># test -x /etc/X11/Xsession &amp;&amp; exec /etc/X11/Xsession</span>\n<span class=\"token comment\"># exec /bin/sh /etc/X11/Xsession</span></code></pre></div>\n<p>e aggiungere le seguenti due:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># xfce</span>\nstartxfce4</code></pre></div>\n<h2>Avvio del server RDP</h2>\n<p>Possiamo quindi procedere a testare il tutto con il seguente comando:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /etc/init.d/xrdp start</code></pre></div>\n<p>Ora in Window avviare una connessione al desktop remoto <code class=\"language-text\">localhost:3390</code> inserendo quando richiesto username e password.</p>\n<h2>Conclusione</h2>\n<p>Nel momento in cui sto scrivendo Microsoft sta gi√† lavorando per portare il supporto alla GUI di WSL con il progetto WSLg. Purtroppo non √® ancora disponibile se non per gli insider e non √® adatto in un contesto di produzione. Questa procedura √® un p√≤ macchinosa ma permette di risolvere eventuali problemi di WSL2 <a href=\"https://github.com/microsoft/WSL/issues/4199\">https://github.com/microsoft/WSL/issues/4199</a> sul port fowarding tra WSL2 e WIndows 10.</p>\n<h2>Riferimenti</h2>\n<ul>\n<li><a href=\"https://dev.to/darksmile92/linux-on-windows-wsl-with-desktop-environment-via-rdp-522g\">https://dev.to/darksmile92/linux-on-windows-wsl-with-desktop-environment-via-rdp-522g</a></li>\n<li><a href=\"https://davidbombal.com/wsl2-ubuntu-gui/\">https://davidbombal.com/wsl2-ubuntu-gui/</a></li>\n</ul>\n<blockquote>\n<p>L‚Äôunico uomo che non commette mai errori, √® l‚Äôuomo che non fa mai niente. (Theodore Roosevelt)</p>\n</blockquote>","frontmatter":{"title":"WSL2 + GUI: Installare XFCE4 in WSL2 (Ubuntu 20.04)","date":"05 August 2021","description":null,"tags":["Software"]}},"previous":{"fields":{"slug":"/2021-07-01-ordine-del-tempo/"},"frontmatter":{"title":"L'ordine del tempo + Che cos'√® il tempo? (Carlo Rovelli)"}},"next":{"fields":{"slug":"/2021-09-01-raspi3-docker/"},"frontmatter":{"title":"Raspberry PI 3 come docker - docker-compose node su Ubuntu Server"}}},"pageContext":{"id":"77ef47a0-8607-55c7-b930-b5d2bf0e3161","previousPostId":"dcb8d496-b5c0-52ef-b5cb-4d76e94d06f8","nextPostId":"5f222852-0fb7-517e-afdd-7cfc097e4f66"}},"staticQueryHashes":["2114561082"],"slicesMap":{}}