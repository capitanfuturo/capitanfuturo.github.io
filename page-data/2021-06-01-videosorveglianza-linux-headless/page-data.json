{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021-06-01-videosorveglianza-linux-headless/","result":{"data":{"site":{"siteMetadata":{"title":"Capitanfuturo"}},"markdownRemark":{"id":"43dbaadc-66ed-5b7a-a0e5-2bb5e928200e","excerpt":"ðŸ’» Introduzione In un precedente articolo ho raccontato come ho recuperato la webcam di un vecchio portatile per poterlo usare come una normale web cam su unâ€¦","html":"<h2>ðŸ’» Introduzione</h2>\n<p>In un precedente articolo ho raccontato come ho recuperato la webcam di un vecchio portatile per poterlo usare come una normale web cam su un altro PC. Il riferimento Ã¨ questo <a href=\"../2021-03-15-recuperare-webcam-ck77-94v-0\">Recuperare una webcam ck77 94v-0 da un vecchio portatile</a></p>\n<p>In questo articolo invece ho provato a collegare la webcam su un Raspberry Pi 3 con un Ubuntu Server 20.04 arm64. Lâ€™idea Ã¨ qundi quella di sfruttare un dispositivo headless, quindi senza alcun monitor collegato, installarci un server web ed accedere da un altro pc alla telecamera.</p>\n<p>Questo meccanismo potrebbe essere visto come un rudimentale sistema di videosorveglianza fatta in casa.</p>\n<h2>Occorrente</h2>\n<ul>\n<li>Un altro PC</li>\n<li>Raspberry pi 3 (Ubuntu 20.04 con OpenSSH installato)</li>\n<li>webcam USB compatibile con Linux</li>\n</ul>\n<h2>Installazione</h2>\n<p>Una volta collegata la webcam al Raspberry e acceduto via SSH il tutto si risolve installando un pacchetto molto interessante: <strong>Motion</strong>. Motion Ã¨ un progetto che nasce proprio con lâ€™intento di interfacciarsi al maggior numero possibile di webcam e permette di costruire camere di sicurezza, timelapse, streaming e molto altro.</p>\n<p>Abilitiamo la scrittura sul device della video camera</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chmod</span> <span class=\"token number\">777</span> /dev/camera0</code></pre></div>\n<p>Per prima cosa installiamo il pacchetto</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> motion</code></pre></div>\n<p>Ora scriviamo la prima configurazione</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> ~/.motion\n<span class=\"token function\">nano</span> ~/.motion/motion.conf</code></pre></div>\n<p>Una prima configurazione utilizzabile Ã¨ questa</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">stream_quality <span class=\"token number\">98</span>\nstream_maxrate <span class=\"token number\">5</span>\nstream_port <span class=\"token number\">8080</span>\nstream_localhost off\noutput_pictures off\nframerate <span class=\"token number\">30</span>\nffmpeg_video_codec mpeg4\nwidth <span class=\"token number\">640</span>\nheight <span class=\"token number\">480</span>\nauto_brightness off\ncontrast <span class=\"token number\">0</span>\nsaturation <span class=\"token number\">0</span></code></pre></div>\n<p>Questo file avvia un webserver alla porta 8080 del raspberry pi, con un framerate di 30fps e una risoluzione 640x480.</p>\n<p>Da un altro PC possiamo controllare che tutto funzioni andando su un browser e accedendo allâ€™indirizzo <a href=\"http://ip-raspi3:8080\">http://ip-raspi3:8080</a>, dove al posto di ip-raspi3 mettete lâ€™indirizzo ip nella vostra rete del raspberry, ad esempio 192.168.1.60.</p>\n<h3>Tuning della configurazione</h3>\n<p>Per tutti i parametri di configurazione la guida Ã¨ reperibile dal sito ufficiale: <a href=\"https://motion-project.github.io/motion_config.html#configfiles\">https://motion-project.github.io/motion_config.html#configfiles</a></p>\n<h2>Conclusione</h2>\n<p>Il risultato della POC penso sia accettabile. Un caso dâ€™uso potrebbe essere quello di una videocamera di sorveglainza interna da collegare ad un meccanismo di notifiche.</p>\n<h3>Miglioramenti</h3>\n<ul>\n<li>Adeguare la configurazione al tipo di web cam usata</li>\n<li>Eseguire un breve video al solo rilevamento di un movimento</li>\n<li>Agganciare un meccanismo di notifica per esempio via telegram</li>\n</ul>\n<h2>Links</h2>\n<ul>\n<li><a href=\"https://gist.github.com/endolith/2052778\">https://gist.github.com/endolith/2052778</a></li>\n<li><a href=\"https://motion-project.github.io/\">https://motion-project.github.io/</a></li>\n</ul>\n<blockquote>\n<p>I segreti piÃ¹ impenetrabili sono nascosti in bella vista. (Dan Brown)</p>\n</blockquote>","frontmatter":{"title":"Videosorveglianza su Linux headless (Raspberry Pi)","date":"01 June 2021","description":null,"tags":["Hardware"]}},"previous":{"fields":{"slug":"/2021-05-15-storia-dell-economia/"},"frontmatter":{"title":"Storia dell'economia (John Kenneth Galbraith)"}},"next":{"fields":{"slug":"/2021-06-15-elon-musk/"},"frontmatter":{"title":"Elon Musk. Tesla, SpaceX e la sfida per un futuro fantastico (Vance Ashlee)"}}},"pageContext":{"id":"43dbaadc-66ed-5b7a-a0e5-2bb5e928200e","previousPostId":"68fd5386-4447-5934-a07c-5d5c8ecf6a36","nextPostId":"5052dc33-972f-540e-8af8-173137525bf3"}},"staticQueryHashes":["2114561082"],"slicesMap":{}}