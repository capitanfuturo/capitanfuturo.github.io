{"componentChunkName":"component---src-templates-blog-post-js","path":"/2021-01-31-arduino-johnny-five/","result":{"data":{"site":{"siteMetadata":{"title":"Capitanfuturo"}},"markdownRemark":{"id":"cd23d9a3-5aa4-56a2-a3a7-bb14b64d1867","excerpt":"💻 Premessa Tra gli obiettivi di questo 2021 c’è quello di perfezionare l’uso di NodeJS e di riflesso Javascript e allora quale migliore modo per fondere quanto…","html":"<h2>💻 Premessa</h2>\n<p>Tra gli obiettivi di questo 2021 c’è quello di perfezionare l’uso di NodeJS e di riflesso Javascript e allora quale migliore modo per fondere quanto imparato l’anno scorso con Arduino insieme a Node?</p>\n<p>Arduino è una piattaforma di prototipizzazione elettronica che permette di pilotare componenti elettronici con linguaggio <a href=\"https://it.wikipedia.org/wiki/Wiring\">Wiring</a> derivato dal C/C++. Ciò lo rende facile da approcciare anche per chi come me ha per lo più masticato Java e affini. NodeJS invece è un runtime Javascript che permette di scrivere codice javascript da far eseguire ad un motore JS V8, famoso per essere il core del browser di Google, Chrome.</p>\n<h2>Johnny Five JS</h2>\n<p>Uno dei progetti più interessanti che ho trovato per mettere insieme i due mondi è <a href=\"http://johnny-five.io/\">Johnny Five</a>. Basato su Node è una piattaforma per IoT e robotics. E’ stato rilasciato da Bocoup nel 2012 e nonostante gli anni è ancora una buona libreria.\nL’utilizzo è abbastanza semplice come descriverò in seguito.</p>\n<h3>Prerequisiti</h3>\n<p>Ho voluto provare questa libreria con un arduino nano, questo perchè per la costruizione di uno dei miei progetti più lunghi: <a href=\"https://github.com/capitanfuturo/spritzino\">spritzino</a> avevo comprato un bundle di 3 arduino nano. Oltre ad arduino servirà un PC con:</p>\n<ol>\n<li>Node.js e npm installato</li>\n<li>Arduino IDE per installare nell’arduino il firmaware <a href=\"https://www.arduino.cc/en/reference/firmata\">firmata</a></li>\n<li>Un code editor. Io utilizzo VSCode.</li>\n</ol>\n<h3>Installazione</h3>\n<p>Dopo aver installato Node ho aperto Arduino IDE. Nel mio caso ho selezionato come dispositivo da Strumenti -> Scheda Arduino Nano e come Processore <em>ATmega328P (Old Bootloader)</em>.</p>\n<p>Collegato L’arduino con la porta USB del PC ho caricato il firmware firmata come da schermata qui sotto:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a4cb3a7b16cbdcc167820a5dcb352ec4/29007/firmata.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTUlEQVR42oWS3U/SYRTHf913UctNLV9uLJUXRU24UEtAEBAwEfBGUNO11ZWzsBmVtfWyNS/rpqy2uqg7L+ymrf4FL1wLVyqb5RZoEKhpgnx6fgROe1ln++w8zznn+e7s+/tJOq0arVZHQ0M9Go2GaqWSiqrqLMerFVSKe71Wi66pCXVdHScUiixVKhUqMa+srUVRU4NSnLXaRiT1yUacnZ2YTCbazWY0gctU3LlH5a27lF+7QWnwOmVXx3OIu8h5SkQvT2lwnIqbt5FOdXnxut04HA7sdju9w8P4xsbwivzmfYjPwPzmFnPJNUKJJKHkXtZ26x+/b/I2FELSWzqwWto53dqKxWLBYbVgbGmhWafl9fQ0y+EwC2IwnU6RjUzmDzI7O9lWeGEBqdPchr+vH4/Hg9/nw+310m6zYRAW2IUVcpaJrn5FPOdHKs12emcfck2OD7LgxQvnWYnHiUSjRCIRRkZG0Ov1GAwGuru7szidTuJi5teCGX6PfG1xcRFpYPAsqdQWiUSCuOBSIEBHhw2b2FIW6+npweVyEYvF/isYFvZIg0ODpLY2+LayzJdohMDoKEajEavVSpcQdAkrzgjB1ZxgWjyWHdtLOic4L2/Y3z8gqtukkjE21tcJXgliFr+PLPhqaoq52VnezcyQTqX4V+Q3/LS0hKQSX9f/5Cm9DyfxCdx9fViFf21yfWKCcy9eMvTsOf7Jx/geTf6VXoHc99x/gFRQcgypsHCXyuZm6kxm1EL0YFk50qHDSEcK9s3sUlSUozibDxQf5Sch4k+fKSv2/gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"firmata.png\"\n        title=\"\"\n        src=\"/static/a4cb3a7b16cbdcc167820a5dcb352ec4/f058b/firmata.png\"\n        srcset=\"/static/a4cb3a7b16cbdcc167820a5dcb352ec4/c26ae/firmata.png 158w,\n/static/a4cb3a7b16cbdcc167820a5dcb352ec4/6bdcf/firmata.png 315w,\n/static/a4cb3a7b16cbdcc167820a5dcb352ec4/f058b/firmata.png 630w,\n/static/a4cb3a7b16cbdcc167820a5dcb352ec4/40601/firmata.png 945w,\n/static/a4cb3a7b16cbdcc167820a5dcb352ec4/78612/firmata.png 1260w,\n/static/a4cb3a7b16cbdcc167820a5dcb352ec4/29007/firmata.png 1600w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>A questo punto non manca che aprire VSCode da console su un progetto nuovo:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> johnny\n<span class=\"token builtin class-name\">cd</span> johnny\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span> johnny-five\ncode <span class=\"token builtin class-name\">.</span></code></pre></div>\n<p>Per provare subito a utilizzare johnny-five si crea un file javascript da far eseguire a node. L’oggetto principale è Board. Riporto qui uno snippet che fa lampeggiare il LED integrato in Arduino:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Board<span class=\"token punctuation\">,</span> Led <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"johnny-five\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> board <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Board</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\nboard<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ready\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> led <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Led</span><span class=\"token punctuation\">(</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span>\n  led<span class=\"token punctuation\">.</span><span class=\"token function\">blink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Progetto: stazione metereologica</h2>\n<p>Per rendere la cosa più interessante ho provato a mettere in piedi un programma Node che ad ogni ora vada ad interrogare una API pubblica e che ne visualizzi il risultato su uno schermo LCD 16x2. Ho rispolverato un progetto che trovate <a href=\"../2020-04-15-arduino-display-1602A\">qui</a>, mentre per l’API ho scelto <a href=\"https://openweathermap.org/\">openweathermap</a> che mette a disposizione previa iscrizione delle API metereologiche gratuitamente.</p>\n<p>Riporto tutto di seguito e in fondo i link principali.</p>\n<h3>Cablaggio</h3>\n<table>\n<thead>\n<tr>\n<th>PIN Display</th>\n<th>Descrizione</th>\n<th>PIN Arduino</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>VSS</td>\n<td>GND, massa del display</td>\n<td>collegato al polo -</td>\n</tr>\n<tr>\n<td>VDD</td>\n<td>5V, alimentazione del display</td>\n<td>collegato al polo +</td>\n</tr>\n<tr>\n<td>V0</td>\n<td>controllo del contrasto</td>\n<td>collegato al potenziometro</td>\n</tr>\n<tr>\n<td>RS</td>\n<td>0 per invio comando, 1 per invio dati</td>\n<td>PIN 12</td>\n</tr>\n<tr>\n<td>RW</td>\n<td>0 per scrittura dati / comandi, 1 per lettura dati / stato display</td>\n<td>collegato al polo -</td>\n</tr>\n<tr>\n<td>E</td>\n<td>inizia il ciclo di lettura / scrittura</td>\n<td>PIN 11</td>\n</tr>\n<tr>\n<td>D0</td>\n<td>Bus dati per comunicazioni 8bit</td>\n<td></td>\n</tr>\n<tr>\n<td>D1</td>\n<td>Bus dati per comunicazioni 8bit</td>\n<td></td>\n</tr>\n<tr>\n<td>D2</td>\n<td>Bus dati per comunicazioni 8bit</td>\n<td></td>\n</tr>\n<tr>\n<td>D3</td>\n<td>Bus dati per comunicazioni 8bit</td>\n<td></td>\n</tr>\n<tr>\n<td>D4</td>\n<td>Bus dati per comunicazioni 8 o 4bit</td>\n<td>PIN 5</td>\n</tr>\n<tr>\n<td>D5</td>\n<td>Bus dati per comunicazioni 8 o 4bit</td>\n<td>PIN 4</td>\n</tr>\n<tr>\n<td>D6</td>\n<td>Bus dati per comunicazioni 8 o 4bit</td>\n<td>PIN 3</td>\n</tr>\n<tr>\n<td>D7</td>\n<td>Bus dati per comunicazioni 8 o 4bit</td>\n<td>PIN 2</td>\n</tr>\n<tr>\n<td>A</td>\n<td>5V, alimentazione della retroilluminazione</td>\n<td>collegato al polo + con resistenza da 220 Ohm</td>\n</tr>\n<tr>\n<td>K</td>\n<td>GND, massa della retroilluminazione</td>\n<td>collegato al polo -</td>\n</tr>\n</tbody>\n</table>\n<h3>Risultato</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fcb2507eb6e1dc59a66b765a92c9fe9f/93719/j5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDAf/EABUBAQEAAAAAAAAAAAAAAAAAAAIB/9oADAMBAAIQAxAAAAHJXiEgob//xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIRITH/2gAIAQEAAQUCofXhjJRdn//EABURAQEAAAAAAAAAAAAAAAAAABAi/9oACAEDAQE/AaP/xAAVEQEBAAAAAAAAAAAAAAAAAAAQIv/aAAgBAgEBPwGT/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAEQIRExMv/aAAgBAQAGPwLc8op4LZ//xAAbEAEAAgIDAAAAAAAAAAAAAAABABEhQTFRsf/aAAgBAQABPyFGwYvmAKWQKqBi94TCPQQE2M//2gAMAwEAAgADAAAAEPPv/8QAGBEBAQADAAAAAAAAAAAAAAAAAQARIUH/2gAIAQMBAT8QXghcbL//xAAYEQEAAwEAAAAAAAAAAAAAAAABABEhQf/aAAgBAgEBPxAOmNXjP//EABwQAQEBAAIDAQAAAAAAAAAAAAERADGBIUGxof/aAAgBAQABPxA6iRQRxhECoFQ51QnSPzBEYSIh8d5zQeo/rqlGbQD5v//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"j5.js\"\n        title=\"\"\n        src=\"/static/fcb2507eb6e1dc59a66b765a92c9fe9f/828fb/j5.jpg\"\n        srcset=\"/static/fcb2507eb6e1dc59a66b765a92c9fe9f/ff44c/j5.jpg 158w,\n/static/fcb2507eb6e1dc59a66b765a92c9fe9f/a6688/j5.jpg 315w,\n/static/fcb2507eb6e1dc59a66b765a92c9fe9f/828fb/j5.jpg 630w,\n/static/fcb2507eb6e1dc59a66b765a92c9fe9f/0ede0/j5.jpg 945w,\n/static/fcb2507eb6e1dc59a66b765a92c9fe9f/3ac88/j5.jpg 1260w,\n/static/fcb2507eb6e1dc59a66b765a92c9fe9f/93719/j5.jpg 4000w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Codice sorgente</h3>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dotenv\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">config</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">LCD</span><span class=\"token punctuation\">,</span> Board <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"johnny-five\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> got <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"got\"</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token constant\">RS</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">RS</span> <span class=\"token operator\">|</span> <span class=\"token number\">12</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">EN</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">EN</span> <span class=\"token operator\">|</span> <span class=\"token number\">11</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DB4</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DB4</span> <span class=\"token operator\">|</span> <span class=\"token number\">5</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DB5</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DB5</span> <span class=\"token operator\">|</span> <span class=\"token number\">4</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DB6</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DB7</span> <span class=\"token operator\">|</span> <span class=\"token number\">3</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DB7</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">DB8</span> <span class=\"token operator\">|</span> <span class=\"token number\">2</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">|</span> <span class=\"token number\">3000</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">API_KEY</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">API_KEY</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">CITY</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">CITY</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">COUNTRY</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">COUNTRY</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">API_URL</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"http://api.openweathermap.org/data/2.5/weather\"</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">REFRESH</span> <span class=\"token operator\">=</span> <span class=\"token number\">1000</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token operator\">*</span> <span class=\"token number\">60</span> <span class=\"token comment\">// 1000 millisec * 60 sec * 60 min</span>\n\n<span class=\"token keyword\">const</span> board <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Board</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> lcd\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">getWeather</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> body <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">got</span><span class=\"token punctuation\">(</span><span class=\"token constant\">API_URL</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">searchParams</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">q</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">CITY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">COUNTRY</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">units</span><span class=\"token operator\">:</span> <span class=\"token string\">\"metric\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">lang</span><span class=\"token operator\">:</span> <span class=\"token string\">\"it\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token constant\">APPID</span><span class=\"token operator\">:</span> <span class=\"token constant\">API_KEY</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  board<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"API\"</span><span class=\"token punctuation\">,</span> body<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">writeWeather</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">return</span> body\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">writeWeather</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">weather</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> temp <span class=\"token operator\">=</span> weather<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>temp\n  <span class=\"token keyword\">const</span> humidity <span class=\"token operator\">=</span> weather<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>humidity\n  <span class=\"token keyword\">const</span> windSpeed <span class=\"token operator\">=</span> weather<span class=\"token punctuation\">.</span>wind<span class=\"token punctuation\">.</span>speed\n  <span class=\"token keyword\">const</span> windDegree <span class=\"token operator\">=</span> weather<span class=\"token punctuation\">.</span>wind<span class=\"token punctuation\">.</span>deg\n  lcd<span class=\"token punctuation\">.</span><span class=\"token function\">cursor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">T:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>temp<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">C h:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>humidity<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">% </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"😄\"</span><span class=\"token punctuation\">)</span>\n  lcd\n    <span class=\"token punctuation\">.</span><span class=\"token function\">cursor</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">w:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>windSpeed<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">m/s </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>windDegree<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\":arrowne:\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">onReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  lcd <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LCD</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">pins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token constant\">RS</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">EN</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">DB4</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">DB5</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">DB6</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">DB7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">rows</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">cols</span><span class=\"token operator\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  lcd<span class=\"token punctuation\">.</span><span class=\"token function\">useChar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"arrowne\"</span><span class=\"token punctuation\">)</span>\n  lcd<span class=\"token punctuation\">.</span><span class=\"token function\">useChar</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"smile\"</span><span class=\"token punctuation\">)</span>\n\n  lcd<span class=\"token punctuation\">.</span><span class=\"token function\">clear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">getWeather</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n  board<span class=\"token punctuation\">.</span><span class=\"token function\">loop</span><span class=\"token punctuation\">(</span><span class=\"token constant\">REFRESH</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">getWeather</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\nboard<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ready\"</span><span class=\"token punctuation\">,</span> onReady<span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Conclusioni</h2>\n<p>L’integrazione tra Arduino e Node è interessante e può aprire la strada a diversi sviluppi. Per esempio si potrebbe usare express.js per mettere in piedi un server che esponga delle API e che possa quindi far pilotare da remoto un dispositivo costruito da noi.</p>\n<p>L’idea è quella di portare a lavoro il tutto e vedere se riuscirò ad integrare questo progetto nel workflow quotidiano. Per esempio potrei potrei interrogare JIRA e avere sempre sotto occhio quante issue devo sistemare… 😅.</p>\n<h2>Link</h2>\n<ul>\n<li><a href=\"http://johnny-five.io/api/\">Johnny Five API</a></li>\n<li><a href=\"https://openweathermap.org/\">openweathermap free API</a></li>\n<li><a href=\"https://github.com/capitanfuturo/arduinoSalad/tree/master/013_J5_node_arduino_nano\">Example from my repo</a></li>\n</ul>\n<blockquote>\n<p>“La pazienza, la perseveranza e il sudato lavoro creano un’imbattibile combinazione per il successo.”. (Napoleon Hill)</p>\n</blockquote>","frontmatter":{"title":"Arduino Nano e Johnny five","date":"31 January 2021","description":null,"tags":["Arduino"]}},"previous":{"fields":{"slug":"/2021-01-02-pensa-e-arricchisci-te-stesso/"},"frontmatter":{"title":"Think & Grow Rich (Napoleon Hill)"}},"next":{"fields":{"slug":"/2021-02-15-ansible/"},"frontmatter":{"title":"Ansible, una breve guida"}}},"pageContext":{"id":"cd23d9a3-5aa4-56a2-a3a7-bb14b64d1867","previousPostId":"5cb9cc26-2509-5561-90ac-a14859b64571","nextPostId":"ebad2215-c60e-5d7e-8516-83d99f0505ef"}},"staticQueryHashes":["2114561082"],"slicesMap":{}}